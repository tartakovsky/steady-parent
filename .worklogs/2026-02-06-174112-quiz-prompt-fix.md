# Fix quiz generation prompt and result page hardcodes

**Date:** 2026-02-06 17:41
**Scope:** `landing/src/lib/quiz/generate-quiz.ts`, `quiz-engine.ts`, `quiz-schema.ts`, `quiz-result.tsx`, `api/og/route.tsx`, `screen-dependence.json`

## Summary
Rewrote the quiz generation prompt to produce correct content from one shot. Fixed engine/component hardcodes that overrode quiz content with "readiness"/"your child" framing. Regenerated screen-dependence quiz as test case.

## Context & Problem
Anna's test of screen-dependence quiz exposed multiple issues:
1. "At 72% readiness" — nonsensical for a screen quiz (engine hardcode)
2. "showing strong Why Screens Come Out" — domain names used as noun phrases in template (bad domain naming)
3. "Where Your Child Shines" showing parenting strengths, not child strengths (component hardcode + wrong subject in content)
4. Medium-level domain content at 6/9 reading as negative when score looks good (prompt content guidance)

Root causes: thin generation prompt + hardcoded "readiness" framing in engine/component.

## Decisions Made

### Prompt rewrite
- **Added:** `subject` field ("your child"/"your family"/"you as a parent") — all content must match
- **Added:** `researchBrief` field (required) — quizzes adapted from instruments, never invented
- **Added:** Domain naming rules — must be 1-3 word noun phrases that work in "strong [name]"
- **Added:** Medium-level content rules — must open by acknowledging what's working
- **Added:** `shareableSummary` per result — natural sentence, no domain names crammed in
- **Added:** Result headline rules — match quiz topic, not generic "readiness"

### Engine: shareableSummary from JSON
- Added optional `shareableSummary` to `ResultTemplate` interface and schema
- Engine uses template's `shareableSummary` when present, falls back to neutral computed version
- Fallback no longer says "readiness" or "your child"

### Component: remove hardcoded text
- "Where Your Child Shines" → "What's Going Well"
- "Curious about your own child's readiness?" → "Want to take this quiz yourself?"
- "Find Out Your Child's Readiness" → "Take This Quiz Yourself"
- Theme color selection: percentage-based instead of result-ID-based (works with any quiz)

## Open Questions
- Need to regenerate remaining 13 quizzes with new prompt
- Potty training quiz still has old result IDs (ready/almost/not-yet) — works fine since theme is now percentage-based
