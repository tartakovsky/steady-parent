# Add Page + Link URL columns to CTA validation, improve mailing form URL detail

**Date:** 2026-02-12 14:11
**Scope:** content-spec/src/validator/cta.ts, content-spec/src/validate-plans.ts, landing/src/app/api/admin/ctas/route.ts, landing/src/app/admin/ctas/page.tsx, content-spec/src/validator/mailing-form.ts

## Summary
Added two new validation columns (Page + Link) to the CTA admin page showing where each CTA appears and where it links to, with check/cross validation. Also improved mailing form URL check detail for waitlist entries to clarify pages are auto-generated.

## Context & Problem
CTA validation page showed copy quality checks (word counts, forbidden terms, etc.) but no URL information. Each CTA has two relevant URLs — the page it appears on and the destination it links to — and neither was visible or validated. The mailing form page showed a "URL" column with green checkmarks that only validated the format prefix, which was misleading for waitlist entries where the user couldn't tell if the page actually existed.

## Decisions Made

### CTA validator: pageUrl + url checks per entry
- **Chose:** Two new checks added to both community and course entry validation
- **pageUrl**: Derived from entry slug — `community-aggression` → `/blog/aggression/*`. Validates category exists in taxonomy.
- **url**: Read from entry's `url` field. Community: must match global community URL. Course: must start with `/course/` and have a matching waitlist entry in mailing form catalog.
- **Why:** Makes URLs visible and validated at a glance. Cross-catalog check (course URL → waitlist entry) proves the destination page will actually be generated.

### coursePageUrls parameter for cross-catalog validation
- **Chose:** Added optional 4th param `coursePageUrls?: Set<string>` to `validateCtaCatalog`
- **Why:** Course CTA urls point to `/course/{slug}/` which are auto-generated from waitlist entries. Passing the set of waitlist URLs allows the CTA validator to verify each course URL has a matching waitlist entry.

### Mailing form URL detail text
- **Chose:** Added "(auto-generated)" to waitlist URL check detail
- **Why:** Waitlist pages are generated FROM the catalog entry itself, so the green checkmark was confusing — user thought it meant the page was verified to exist. Now it says `/course/beyond-hitting/ (auto-generated)` which explains the circularity.

## Key Files for Context
- `content-spec/src/validator/cta.ts` — pageUrl + url checks, coursePageUrls param
- `content-spec/src/validator/mailing-form.ts` — improved urlPattern detail for waitlists
- `landing/src/app/admin/ctas/page.tsx` — Page + Link columns in UI tables
- `landing/src/app/api/admin/ctas/route.ts` — loads mailing form catalog for cross-check
- `content-spec/src/validate-plans.ts` — passes coursePageUrls to CTA validator
