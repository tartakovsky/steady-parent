# Phase 5.3: Per-Article Link Plan

**Date:** 2026-02-06 16:36
**Scope:** `research/article_link_plan.json` (new), `research/production_process.md`, `~/.claude/CLAUDE.md`

## Summary

Generated per-article link plans for all 245 articles (20 pillar + 225 series). Plans include internal links (5-10 per series article, 12-18 per pillar) and 3 CTAs each. Also refined the link plan schema through iterative discussion, updated the production process with exact schema documentation, and fixed pillar articles to use a different structure than series articles.

## Context & Problem

Phase 5.3 is the last step before article writing can begin (Phase 6+). The writer model needs to know which internal links and CTAs to weave into each article. Without a pre-computed link plan, the writer would either hallucinate URLs or produce articles with no internal linking.

Starting state: 245 articles had URLs (Phase 5.1) and a CTA inventory existed (Phase 5.2), but no per-article link assignments.

## Decisions Made

### Link plan JSON schema — iterated through several versions
- **Chose:** Every object has exactly 3 keys: `url`, `type`, `intent`. Consistent across all links and CTAs.
- **Why:** Early drafts had inconsistent keys (some objects had `type`, others `anchor_intent`, others `note`). User caught this and demanded structural consistency. Lesson: define the schema first, then generate.

### What "intent" means — critical distinction
- **Chose:** Intent is a "use when" trigger that tells the writer model WHEN in the article's topic this link is relevant.
- **Why:** Went through 4 wrong interpretations before landing on the right one:
  1. ❌ Description of destination ("detailed calm techniques") — that's a label, not intent
  2. ❌ Reader psychology ("reader wants practical tools") — that's motivation, not intent
  3. ❌ Placement instructions ("link when discussing X section") — assumes article structure we don't know yet
  4. ❌ Writing instructions ("lead into it with context about...") — too prescriptive about content
  5. ✅ Topical bridge trigger ("when discussing the parent's own emotional regulation in the moment") — tells the writer what topic connects the two articles so it can find the right spot in whatever content it produces
- **Exception for structural links:** pillar/prev/next have fixed intents ("link to the pillar article for this series") because their purpose is structural navigation, not topical. Same for CTAs: "sell the course at the most natural point in the article".

### Pillar vs. series articles — fundamentally different structures
- **Chose:** Pillar articles link to ALL series articles in order (type `series_preview`). Series articles link to pillar/prev/next at the END of the article as a navigation block.
- **Why:** Pillar articles are hub pages that preview every article in the series sequentially — they walk the reader through the topic in order. Series articles are standalone pieces where structural navigation belongs at the bottom, not mixed into the body content.
- **Alternatives considered:**
  - Pillar links to 3-5 selected series articles — rejected: the pillar's job is to preview the whole series
  - prev/next links distributed in body like other links — rejected: they're navigation, not editorial

### Quizzes are links, not CTAs
- **Chose:** Quizzes go in the `links` array with type `quiz`. CTAs are course, community, freebie only.
- **Why:** Quizzes are internal content the reader uses — same as articles. CTAs are conversion actions (buy, join, subscribe). Different purpose, different placement behavior.

### Generation approach — 4 parallel Opus agents
- **Chose:** 4 parallel agents, 5 categories each, one taxonomy read per agent
- **Why:** Each agent needs the full taxonomy (cross-links go to any category). 4 agents is a good balance — enough parallelism to be fast, few enough to avoid coordination issues.
- **Pillar fix afterward:** Pillar articles were initially generated with only 3-5 sibling links. After the structural discussion, a Python script replaced these with ALL series articles as `series_preview`. No need to re-run agents.

## Architectural Notes

The link plan file (`research/article_link_plan.json`) is a flat array of 245 objects. No nesting by category — the writer receives one object per article and doesn't need to understand the broader structure.

Link types partition cleanly into two placement zones:
- **Body links** (distributed by writer): `cross`, `sibling`, `quiz`
- **Navigation links** (end of article): `pillar`, `prev`, `next`
- **Hub links** (pillar articles only): `series_preview` — these ARE the article body structure

The 5-10 link count for series articles breaks down as: 3 mandatory structural (pillar + prev + next) + 2-7 editorial (cross + sibling + quiz). Pillar articles have no upper bound since they link to all series articles.

## Information Sources

- `research/taxonomy_v3.md` — all article URLs, cross-link maps, quiz/course connections
- `research/production_process.md` — Phase 5.2 schema (updated during this session)
- `research/seo/article-structure.md` — link count requirements (5-10 per article)
- Previous worklog: `.worklogs/2026-02-06-132412-phase5-url-registry-and-cta-inventory.md`

## Open Questions / Future Considerations

1. **Teens have no quiz links** — no quiz in the quiz table connects to the teens category. May want to create a teen-specific quiz later.
2. **Aggression and body-safety have no quiz links** — same issue. Low priority but noted.
3. **Freebie URLs are all null** — every article has a freebie CTA with `null` URL. These need to be defined before or during writing. The writer can skip the freebie CTA or use a generic "subscribe for tips" placeholder.
4. **Link plan doesn't include external links** — the article-structure.md requires 1-3 external links to authoritative sources. These are left to the writer since they depend on which research/guidelines are cited in the source material.

## Key Files for Context

- `research/article_link_plan.json` — THE output of this phase. 245 link plan objects, one per article. This file feeds directly into Phase 6 (article input assembly).
- `research/taxonomy_v3.md` — master file with all article URLs, linkable assets, cross-link maps. The link plan was generated from this.
- `research/production_process.md` — updated with the exact link plan schema, type definitions, intent rules, and pillar vs. series structure. Section 5.2 is the reference.
- `research/source_to_article_assignment.json` — maps sources to articles. Needed alongside the link plan for Phase 6 input assembly.
- `research/seo/article-structure.md` — article structure rules the writer follows.
- `research/seo/writing-style.md` — voice and tone guide.
- `.worklogs/2026-02-06-132412-phase5-url-registry-and-cta-inventory.md` — previous worklog covering Phase 5.1-5.2.
- `.worklogs/2026-02-06-120000-article-generation-pipeline-experiments.md` — experiment results that validated the single-pass writing approach.

## Next Steps / Continuation Plan

### Phase 5 is COMPLETE. Phase 6 (article input assembly) is next.

1. **Phase 6.1: Assemble writer input bundles.** For each article, collect:
   - Raw source files from `research/extracted/` (using `research/source_to_article_assignment.json` to know which sources feed this article)
   - The article's link plan object from `research/article_link_plan.json`
   - CTA inventory (from taxonomy linkable assets section)
   - Article context: category, pillar vs. series, position in series
   - Style rules: `research/seo/article-structure.md` + `research/seo/writing-style.md`

2. **Phase 7.1: Write articles.** One Opus call per article. The writer receives the full input bundle and produces a complete article with inline links and CTAs. Start with one category (e.g., tantrums, 15 articles) as a test batch before scaling to all 245.

3. **Phase 7.3: Validate articles.** Deterministic script checks:
   - All URLs exist in the URL registry
   - Link count 5-10
   - Word count 1,800-2,200 (or 3,500 for pillars)
   - 3 CTAs present with real URLs
   - Heading hierarchy (H1 → H2 → H3 only)

4. **Phase 8: Cross-article link graph validation.** After all articles are written, build a directed graph and check: no orphans, no overlinked articles, pillar connectivity, cross-category coverage.
