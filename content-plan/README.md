# content-plan/

The content plan: structured definitions that drive the entire content pipeline. Every file here is **live** â€” consumed by the build system, admin API routes, validation CLI, or article generation scripts.

Historical research, competitor analyses, and one-time prompt templates live in `research/`.

## Files

### Article Pipeline

| File | What it is | Consumed by |
|------|-----------|-------------|
| `article_taxonomy.json` | 20 categories, 245 articles with slugs, URLs, types | Admin spec API, validate-plans, CTA/cross-link validation |
| `article_link_plan.json` | Per-article link plans (body links, nav links, CTAs) | Admin spec API, validate-plans, build script, generate_article.py, validate_article.py |
| `source_to_article_assignment.json` | Maps ~965 source extracts to 245 target articles | generate_article.py, assemble_one_article_bundle.py |
| `writer_prompt.md` | The article writer prompt template (all constraints) | generate_article.py |

### CTA System

| File | What it is | Consumed by |
|------|-----------|-------------|
| `cta_catalog.json` | 65 CTA entries: global + per-category community + per-quiz community + per-category course | Admin spec API, validate-plans, build script, generate_article.py |
| `mailing_form_catalog.json` | 64 mailing form entries: per-category freebie + per-category waitlist + per-quiz quiz-gate | Admin spec/mailing APIs, validate-plans, build script, sync-orchestrator, article validator |

### Quiz System

| File | What it is | Consumed by |
|------|-----------|-------------|
| `quiz_taxonomy.json` | 24 quizzes with slugs, types, categories, URLs | Admin spec/plan/quizzes APIs, validate-plans, build script |
| `quiz_page_types.json` | Hard constraints per quiz type (data model, result display, word counts) | Admin spec/quizzes APIs, validate-plans, build script |
| `quizzes/quiz-definitions.json` | Generated quiz content (questions, scales, results) | Admin quizzes API, build script |

### Page Types & Mailing

| File | What it is | Consumed by |
|------|-----------|-------------|
| `page_types.json` | Page type definitions (article, pillar, quiz, course) | Admin spec API, validate-plans, build script |
| `mailing_tags.json` | Kit (ConvertKit) tag taxonomy for email automation | Admin spec/mailing APIs, validate-plans |
| `form_tag_mappings.json` | Maps forms/freebies to Kit tags | Admin spec/mailing APIs, validate-plans |
| `kit_integration.json` | Kit email integration spec: API routes, custom fields, frontend checks for quiz + blog freebie flows | Admin mailing API, validate-plans |

## How files are used

**Dev mode:** TypeScript reads from `../content-plan/{filename}` relative to `landing/` working directory.

**Production build:** `landing/package.json` build script copies JSON files to `.next/standalone/mdx-sources/`. The admin API routes check `NODE_ENV` and resolve to `mdx-sources/` in production.

**Python scripts:** Resolve paths via `REPO_ROOT / "content-plan" / filename` where `REPO_ROOT` is the monorepo root.

**Validation CLI:** `npx tsx content-spec/src/validate-plans.ts` reads all JSON files and runs schema + business rule validation.

## Editing rules

- **JSON files**: Do not hand-edit. They are generated by scripts or LLM agents and validated by `content-spec` schemas. Run `npx tsx content-spec/src/validate-plans.ts` after any change.
- **writer_prompt.md**: Hand-edited. This is the article generation prompt template.
- **quiz-definitions.json**: Generated by quiz generation agents. Validated by quiz validator.
