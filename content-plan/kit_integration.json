{
  "customFields": ["quiz_result_url", "timezone"],
  "subscriberApiRoutes": {
    "quiz": "/api/quiz-subscribe",
    "blogFreebie": "/api/freebie-subscribe",
    "waitlist": "/api/waitlist-subscribe"
  },
  "localStorageKey": "sp_subscriber_email",
  "timezoneCapture": {
    "description": "Every form submission includes the browser timezone via Intl.DateTimeFormat().resolvedOptions().timeZone (e.g. 'America/New_York'). All API routes pass it to Kit as the 'timezone' custom field. Kit does not natively detect timezone — this is the only reliable source. Updated on every submission so it stays current if subscriber moves.",
    "frontendCode": "Intl.DateTimeFormat().resolvedOptions().timeZone",
    "kitCustomField": "timezone"
  },
  "quizSubscribeFlow": {
    "description": "Quiz email gate submits to /api/quiz-subscribe with fromGate:true, which creates/updates Kit subscriber, sets quiz_result_url + timezone fields, adds quiz-specific tag + lead tag, and removes+re-adds quiz-completed tag to trigger Kit automation. When localStorage has email (returning user), quiz completion calls the same endpoint with fromGate:false — tags the subscriber and updates quiz_result_url + timezone but does NOT touch quiz-completed, so no email is sent.",
    "requiredTags": ["lead"],
    "tagPrefix": "quiz-",
    "automationTriggerTag": "quiz-completed",
    "customFieldOnSubmit": "quiz_result_url",
    "fromGateFlag": {
      "true": "User went through email gate → remove+re-add quiz-completed → Kit automation sends results email",
      "false": "Silent background call (localStorage had email) → skip quiz-completed → no email"
    }
  },
  "blogFreebieFlow": {
    "description": "Blog freebie form submits to /api/freebie-subscribe, creates/updates Kit subscriber with timezone, adds freebie tag + lead tag",
    "requiredTags": ["lead"],
    "tagPrefix": "freebie-"
  },
  "waitlistFlow": {
    "description": "Course waitlist form submits to /api/waitlist-subscribe, creates/updates Kit subscriber with timezone, adds waitlist tag + lead tag",
    "requiredTags": ["lead"],
    "tagPrefix": "waitlist-"
  },
  "requiredSequences": {
    "quizResults": "Quiz Results Email"
  },
  "frontendChecks": {
    "freebieCta": {
      "file": "src/components/blog/freebie-cta.tsx",
      "requiredProps": ["onSubmit"]
    },
    "quizContainer": {
      "file": "src/components/quiz/quiz-container.tsx",
      "requiredPatterns": ["sp_subscriber_email", "subscribeForQuizResults"]
    },
    "likertQuiz": {
      "file": "src/components/quiz/likert-quiz.tsx",
      "requiredPatterns": ["sp_subscriber_email", "subscribeForQuizResults"]
    },
    "courseHero": {
      "file": "src/components/course/course-hero.tsx",
      "requiredPatterns": ["fetch", "/api/waitlist-subscribe"]
    }
  }
}
